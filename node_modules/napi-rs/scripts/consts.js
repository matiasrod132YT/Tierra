"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getNapiConfig = void 0;
const path_1 = require("path");
function getNapiConfig(packageJson = 'package.json') {
    var _a, _b;
    const packageJsonPath = path_1.join(process.cwd(), packageJson);
    const pkgJson = require(packageJsonPath);
    const { version: packageVersion, os, napi, name } = pkgJson;
    const muslPlatforms = ((_a = napi === null || napi === void 0 ? void 0 : napi.musl) !== null && _a !== void 0 ? _a : []).map((platform) => `${platform}-musl`);
    const platforms = os;
    const releaseVersion = process.env.RELEASE_VERSION;
    const releaseVersionWithoutPrefix = (releaseVersion === null || releaseVersion === void 0 ? void 0 : releaseVersion.startsWith('v')) ? releaseVersion.substr(1)
        : releaseVersion;
    const version = releaseVersionWithoutPrefix !== null && releaseVersionWithoutPrefix !== void 0 ? releaseVersionWithoutPrefix : packageVersion;
    const packageName = name;
    const binaryName = (_b = napi === null || napi === void 0 ? void 0 : napi.name) !== null && _b !== void 0 ? _b : 'index';
    return {
        muslPlatforms,
        platforms,
        version,
        packageName,
        binaryName,
        packageJsonPath,
        content: pkgJson,
    };
}
exports.getNapiConfig = getNapiConfig;
//# sourceMappingURL=consts.js.map